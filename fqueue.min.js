/*
*fqueue.js v 0.3.2
*Author: Sudhanshu Yadav
*s-yadav.github.com
*Copyright (c) 2013 Sudhanshu Yadav.
*Licensed under MIT licenses
*/

(function(){function e(e,t){t=t||0;return Array.prototype.slice.call(e,t)}function t(){var e=arguments,t=e[0];for(var n=1,r=e.length;n<r;n++){var i=e[n];for(var s in i){if(i.hasOwnProperty(s)){t[s]=i[s]}}}return t}function n(e,t){for(var n=0,r=e.length;n<r;n++){if(e[n]==t)return n}return-1}function r(e,t){this.func=t;this.current=-1;this.startParams=e.startParams;this.data={};this.ignoreIdxs=[];this.results=[];this.autoStep=e.autoStep}r.prototype={constructor:r,next:function(){var t=++this.current,r=this.func[t],i;this.left=1;if(!r)return;if(n(this.ignoreIdxs,t)==-1){if(typeof r==="function"){i=r.apply(this,e(arguments))}else{i=[];var s=this.left=r.length;for(var o=0;o<s;o++){i.push(r[o].apply(this,e(arguments)))}}this.previousResult=i;this.results[t]=i}if(this.autoStep&&!this.paused){this.next()}},complete:function(){this.left--;if(this.left===0){this.paused=false;this.next.apply(this,e(arguments))}},hold:function(){this.paused=true},"continue":function(){this.paused=false;this.next()},start:function(t){this.results=[];this.previousResult=null;this.current=t-1;this.next(e(arguments,1))},stop:function(){this.autoStep=false;this.current=-1},add:function(e,t){t=t||this.func.length;this.func.splice(t,0,e);this.results.splice(t,0,e)},remove:function(e){this.func.splice(e,1);this.results.splice(e,1)},ignore:function(e){this.ignoreIdxs=e}};var i=function(n){var s=n,o=1;if(Object.prototype.toString.call(n)!="[object Object]"){s={};o=0}s=t({},i.defaults,s);var u=new r(s,e(arguments,o));u.step=function(){var t=u;t.originialThis=this;t.left--;if(t.left===0){t.paused=false;t.next.apply(t,e(arguments))}};if(s.autoStart){var a=[0].concat(s.startParams);u.start.apply(u,a)}return u};i.defaults={autoStart:true,autoStep:true,startParams:[]};window.exports=i})()